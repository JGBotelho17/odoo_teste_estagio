<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_mac_analytic_line_tree" model="ir.ui.view">
        <field name="name">account.analytic.line.mac.tree</field>
        <field name="model">account.analytic.line</field>
        <field name="arch" type="xml">
            <list string="Registos Analiticos" create="0" delete="0">
                <field name="name" string="Linha Analitica"/>
                <field name="partner_id" string="Parceiro"/>
                <field name="unit_amount" string="Quantidade"/>
                <field name="amount" string="Valor"/>
                <field name="x_studio_ca" string="Conta analitica"/>
                <field name="date" string="Data"/>
            </list>
        </field>
    </record>

    <record id="view_mac_analytic_line_form" model="ir.ui.view">
        <field name="name">account.analytic.line.mac.form</field>
        <field name="model">account.analytic.line</field>
        <field name="arch" type="xml">
            <form create="0" delete="0">
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name" nolabel="1"/>
                        </h1>
                    </div>
                    <group>
                        <field name="mac_is_client" string="Cliente"/>
                        <field name="name" string="Linha analitica"/>
                        <field name="unit_amount" string="Quantidade"/>
                        <field name="mac_expected_qty" string="Quantidade esperada"/>
                        <field name="partner_id" string="Parceiro"/>
                        <field name="currency_id" string="Currency"/>
                        <field name="amount" string="Valor"/>
                        <field name="mac_expected_amount" string="Valor esperado"/>
                        <field name="mac_payment_state" string="Estado de pagamento"/>
                        <field name="x_studio_ca" string="Conta analitica"/>
                        <field name="mac_payment_end_date" string="Data final do pagamento"/>
                        <field name="mac_balance" string="Balanco" readonly="1"/>
                        <field name="create_date" string="Data criacao" readonly="1"/>
                        <field name="mac_final_due_date" string="Data vencimento final"/>
                        <field name="mac_expected_date" string="Data esperada"/>
                    </group>
                    <notebook>
                        <page string="Lista de BOM">
                            <field name="x_studio_bom_1" readonly="1">
                                <list create="0" delete="0">
                                    <field name="code" string="Referencia"/>
                                    <field name="product_tmpl_id" string="Produto"/>
                                    <field name="product_qty" string="Quantidade"/>
                                    <field name="product_uom_id" string="Unidade"/>
                                </list>
                            </field>
                        </page>
                        <page string="Lista de Milestones">
                            <field name="x_studio_milestones" readonly="1">
                                <list create="0" delete="0">
                                    <field name="name"/>
                                    <field name="project_id" string="Projeto"/>
                                    <field name="deadline" string="Prazo"/>
                                    <field name="is_reached" string="Concluida"/>
                                </list>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="action_mac_analitica" model="ir.actions.act_window">
        <field name="name">Registos Analiticos</field>
        <field name="res_model">account.analytic.line</field>
        <field name="view_mode">list,form</field>
        <field name="context">{'create': 0}</field>
        <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'list', 'view_id': ref('view_mac_analytic_line_tree')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('view_mac_analytic_line_form')})]"/>
    </record>

    <record id="view_mac_fluxo_tree" model="ir.ui.view">
        <field name="name">mac.analitica.principal.tree</field>
        <field name="model">mac.analitica</field>
        <field name="arch" type="xml">
            <list string="Conta Analitica Principal">
                <field name="name"/>
                <field name="partner_id"/>
                <field name="x_studio_ca" string="Conta Analitica Principal"/>
            </list>
        </field>
    </record>

    <record id="view_mac_fluxo_form" model="ir.ui.view">
        <field name="name">mac.analitica.principal.form</field>
        <field name="model">mac.analitica</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <field name="name"/>
                        <field name="partner_id"/>
                        <field name="x_studio_ca" string="Conta Analitica Principal"/>
                    </group>
                    <group string="BOMs Relacionados">
                        <field name="x_studio_bom_1" readonly="1"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="action_mac_conta_analitica_principal" model="ir.actions.act_window">
        <field name="name">Conta Analitica Principal</field>
        <field name="res_model">mac.analitica</field>
        <field name="view_mode">list,form</field>
        <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'list', 'view_id': ref('view_mac_fluxo_tree')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('view_mac_fluxo_form')})]"/>
    </record>

    <menuitem id="menu_mac_root" name="Mac Operacoes" sequence="10"/>
    <menuitem id="menu_mac_analitica_child"
              name="Registos Analiticos"
              parent="menu_mac_root"
              action="action_mac_analitica"
              sequence="10"/>
    <menuitem id="menu_mac_conta_analitica_principal_child"
              name="Conta Analitica Principal"
              parent="menu_mac_root"
              action="action_mac_conta_analitica_principal"
              sequence="20"/>
</odoo>
